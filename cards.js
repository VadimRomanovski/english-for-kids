const cards = [ 
  ['Action (set A)', 'Action (set B)', 'Animal (set A)', 'Animal (set B)', 'Clothes', 'Emotions'],
  [
    {
      word: 'cry',
      translation: 'плакать',
      image: 'img/cry.jpg',
      audioSrc: 'audio/cry.mp3'
    },
    {
      word: 'dance',
      translation: 'танцевать',
      image: 'img/dance.jpg',
      audioSrc: 'audio/dance.mp3'
    },
    {
      word: 'dive',
      translation: 'нырять',
      image: 'img/dive.jpg',
      audioSrc: 'audio/dive.mp3'
    },
    {
      word: 'draw',
      translation: 'рисовать',
      image: 'img/draw.jpg',
      audioSrc: 'audio/draw.mp3'
    },
    {
      word: 'fish',
      translation: 'ловить рыбу',
      image: 'img/fish.jpg',
      audioSrc: 'audio/fish.mp3'
    },
    {
      word: 'fly',
      translation: 'летать',
      image: 'img/fly.jpg',
      audioSrc: 'audio/fly.mp3'
    },
    {
      word: 'hug',
      translation: 'обнимать',
      image: 'img/hug.jpg',
      audioSrc: 'audio/hug.mp3'
    },
    {
      word: 'jump',
      translation: 'прыгать',
      image: 'img/jump.jpg',
      audioSrc: 'audio/jump.mp3'
    }
  ],
  [
    {
      word: 'open',
      translation: 'открывать',
      image: 'img/open.jpg',
      audioSrc: 'audio/open.mp3'
    },
    {
      word: 'play',
      translation: 'играть',
      image: 'img/play.jpg',
      audioSrc: 'audio/play.mp3'
    },
    {
      word: 'point',
      translation: 'указывать',
      image: 'img/point.jpg',
      audioSrc: 'audio/point.mp3'
    },
    {
      word: 'ride',
      translation: 'ездить',
      image: 'img/ride.jpg',
      audioSrc: 'audio/ride.mp3'
    },
    {
      word: 'run',
      translation: 'бегать',
      image: 'img/run.jpg',
      audioSrc: 'audio/run.mp3'
    },
    {
      word: 'sing',
      translation: 'петь',
      image: 'img/sing.jpg',
      audioSrc: 'audio/sing.mp3'
    },
    {
      word: 'skip',
      translation: 'пропускать, прыгать',
      image: 'img/skip.jpg',
      audioSrc: 'audio/skip.mp3'
    },
    {
      word: 'swim',
      translation: 'плавать',
      image: 'img/swim.jpg',
      audioSrc: 'audio/swim.mp3'
    }
  ],
  [
    {
      word: 'cat',
      translation: 'кот',
      image: 'img/cat.jpg',
      audioSrc: 'audio/cat.mp3'
    },
    {
      word: 'chick',
      translation: 'цыплёнок',
      image: 'img/chick.jpg',
      audioSrc: 'audio/chick.mp3'
    },
    {
      word: 'chicken',
      translation: 'курица',
      image: 'img/chicken.jpg',
      audioSrc: 'audio/chicken.mp3'
    },
    {
      word: 'dog',
      translation: 'собака',
      image: 'img/dog.jpg',
      audioSrc: 'audio/dog.mp3'
    },
    {
      word: 'horse',
      translation: 'лошадь',
      image: 'img/horse.jpg',
      audioSrc: 'audio/horse.mp3'
    },
    {
      word: 'pig',
      translation: 'свинья',
      image: 'img/pig.jpg',
      audioSrc: 'audio/pig.mp3'
    },
    {
      word: 'rabbit',
      translation: 'кролик',
      image: 'img/rabbit.jpg',
      audioSrc: 'audio/rabbit.mp3'
    },
    {
      word: 'sheep',
      translation: 'овца',
      image: 'img/sheep.jpg',
      audioSrc: 'audio/sheep.mp3'
    }
  ],
  [
    {
      word: 'bird',
      translation: 'птица',
      image: 'img/bird.jpg',
      audioSrc: 'audio/bird.mp3'
    },
    {
      word: 'fish',
      translation: 'рыба',
      image: 'img/fish1.jpg',
      audioSrc: 'audio/fish.mp3'
    },
    {
      word: 'frog',
      translation: 'жаба',
      image: 'img/frog.jpg',
      audioSrc: 'audio/frog.mp3'
    },
    {
      word: 'giraffe',
      translation: 'жирафа',
      image: 'img/giraffe.jpg',
      audioSrc: 'audio/giraffe.mp3'
    },
    {
      word: 'lion',
      translation: 'лев',
      image: 'img/lion.jpg',
      audioSrc: 'audio/lion.mp3'
    },
    {
      word: 'mouse',
      translation: 'мышь',
      image: 'img/mouse.jpg',
      audioSrc: 'audio/mouse.mp3'
    },
    {
      word: 'turtle',
      translation: 'черепаха',
      image: 'img/turtle.jpg',
      audioSrc: 'audio/turtle.mp3'
    },
    {
      word: 'dolphin',
      translation: 'дельфин',
      image: 'img/dolphin.jpg',
      audioSrc: 'audio/dolphin.mp3'
    }
  ],
  [
    {
      word: 'skirt',
      translation: 'юбка',
      image: 'img/skirt.jpg',
      audioSrc: 'audio/skirt.mp3'
    },
    {
      word: 'pants',
      translation: 'брюки',
      image: 'img/pants.jpg',
      audioSrc: 'audio/pants.mp3'
    },
    {
      word: 'blouse',
      translation: 'блузка',
      image: 'img/blouse.jpg',
      audioSrc: 'audio/blouse.mp3'
    },
    {
      word: 'dress',
      translation: 'платье',
      image: 'img/dress.jpg',
      audioSrc: 'audio/dress.mp3'
    },
    {
      word: 'boot',
      translation: 'ботинок',
      image: 'img/boot.jpg',
      audioSrc: 'audio/boot.mp3'
    },
    {
      word: 'shirt',
      translation: 'рубашка',
      image: 'img/shirt.jpg',
      audioSrc: 'audio/shirt.mp3'
    },
    {
      word: 'coat',
      translation: 'пальто',
      image: 'img/coat.jpg',
      audioSrc: 'audio/coat.mp3'
    },
    {
      word: 'shoe',
      translation: 'туфли',
      image: 'img/shoe.jpg',
      audioSrc: 'audio/shoe.mp3'
    }
  ],
  [
    {
      word: 'sad',
      translation: 'грустный',
      image: 'img/sad.jpg',
      audioSrc: 'audio/sad.mp3'
    },
    {
      word: 'angry',
      translation: 'сердитый',
      image: 'img/angry.jpg',
      audioSrc: 'audio/angry.mp3'
    },
    {
      word: 'happy',
      translation: 'счастливый',
      image: 'img/happy.jpg',
      audioSrc: 'audio/happy.mp3'
    },
    {
      word: 'tired',
      translation: 'уставший',
      image: 'img/tired.jpg',
      audioSrc: 'audio/tired.mp3'
    },
    {
      word: 'surprised',
      translation: 'удивлённый',
      image: 'img/surprised.jpg',
      audioSrc: 'audio/surprised.mp3'
    },
    {
      word: 'scared',
      translation: 'испуганный',
      image: 'img/scared.jpg',
      audioSrc: 'audio/scared.mp3'
    },
    {
      word: 'smile',
      translation: 'улыбка',
      image: 'img/smile.jpg',
      audioSrc: 'audio/smile.mp3'
    },
    {
      word: 'laugh',
      translation: 'смех',
      image: 'img/laugh.jpg',
      audioSrc: 'audio/laugh.mp3'
    }
  ]
];


let statistics = [
    {
      word: 'cry',
      translation: 'плакать',
      image: 'img/cry.jpg',
      audioSrc: 'audio/cry.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'dance',
      translation: 'танцевать',
      image: 'img/dance.jpg',
      audioSrc: 'audio/dance.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'dive',
      translation: 'нырять',
      image: 'img/dive.jpg',
      audioSrc: 'audio/dive.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'draw',
      translation: 'рисовать',
      image: 'img/draw.jpg',
      audioSrc: 'audio/draw.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'fish',
      translation: 'ловить рыбу',
      image: 'img/fish.jpg',
      audioSrc: 'audio/fish.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'fly',
      translation: 'летать',
      image: 'img/fly.jpg',
      audioSrc: 'audio/fly.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'hug',
      translation: 'обнимать',
      image: 'img/hug.jpg',
      audioSrc: 'audio/hug.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'jump',
      translation: 'прыгать',
      image: 'img/jump.jpg',
      audioSrc: 'audio/jump.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'open',
      translation: 'открывать',
      image: 'img/open.jpg',
      audioSrc: 'audio/open.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'play',
      translation: 'играть',
      image: 'img/play.jpg',
      audioSrc: 'audio/play.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'point',
      translation: 'указывать',
      image: 'img/point.jpg',
      audioSrc: 'audio/point.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'ride',
      translation: 'ездить',
      image: 'img/ride.jpg',
      audioSrc: 'audio/ride.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'run',
      translation: 'бегать',
      image: 'img/run.jpg',
      audioSrc: 'audio/run.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'sing',
      translation: 'петь',
      image: 'img/sing.jpg',
      audioSrc: 'audio/sing.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'skip',
      translation: 'пропускать, прыгать',
      image: 'img/skip.jpg',
      audioSrc: 'audio/skip.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'swim',
      translation: 'плавать',
      image: 'img/swim.jpg',
      audioSrc: 'audio/swim.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'cat',
      translation: 'кот',
      image: 'img/cat.jpg',
      audioSrc: 'audio/cat.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'chick',
      translation: 'цыплёнок',
      image: 'img/chick.jpg',
      audioSrc: 'audio/chick.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'chicken',
      translation: 'курица',
      image: 'img/chicken.jpg',
      audioSrc: 'audio/chicken.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'dog',
      translation: 'собака',
      image: 'img/dog.jpg',
      audioSrc: 'audio/dog.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'horse',
      translation: 'лошадь',
      image: 'img/horse.jpg',
      audioSrc: 'audio/horse.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'pig',
      translation: 'свинья',
      image: 'img/pig.jpg',
      audioSrc: 'audio/pig.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'rabbit',
      translation: 'кролик',
      image: 'img/rabbit.jpg',
      audioSrc: 'audio/rabbit.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'sheep',
      translation: 'овца',
      image: 'img/sheep.jpg',
      audioSrc: 'audio/sheep.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'bird',
      translation: 'птица',
      image: 'img/bird.jpg',
      audioSrc: 'audio/bird.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'fish',
      translation: 'рыба',
      image: 'img/fish1.jpg',
      audioSrc: 'audio/fish.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'frog',
      translation: 'жаба',
      image: 'img/frog.jpg',
      audioSrc: 'audio/frog.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'giraffe',
      translation: 'жирафа',
      image: 'img/giraffe.jpg',
      audioSrc: 'audio/giraffe.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'lion',
      translation: 'лев',
      image: 'img/lion.jpg',
      audioSrc: 'audio/lion.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'mouse',
      translation: 'мышь',
      image: 'img/mouse.jpg',
      audioSrc: 'audio/mouse.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'turtle',
      translation: 'черепаха',
      image: 'img/turtle.jpg',
      audioSrc: 'audio/turtle.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'dolphin',
      translation: 'дельфин',
      image: 'img/dolphin.jpg',
      audioSrc: 'audio/dolphin.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'skirt',
      translation: 'юбка',
      image: 'img/skirt.jpg',
      audioSrc: 'audio/skirt.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'pants',
      translation: 'брюки',
      image: 'img/pants.jpg',
      audioSrc: 'audio/pants.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'blouse',
      translation: 'блузка',
      image: 'img/blouse.jpg',
      audioSrc: 'audio/blouse.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'dress',
      translation: 'платье',
      image: 'img/dress.jpg',
      audioSrc: 'audio/dress.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'boot',
      translation: 'ботинок',
      image: 'img/boot.jpg',
      audioSrc: 'audio/boot.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'shirt',
      translation: 'рубашка',
      image: 'img/shirt.jpg',
      audioSrc: 'audio/shirt.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'coat',
      translation: 'пальто',
      image: 'img/coat.jpg',
      audioSrc: 'audio/coat.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'shoe',
      translation: 'туфли',
      image: 'img/shoe.jpg',
      audioSrc: 'audio/shoe.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'sad',
      translation: 'грустный',
      image: 'img/sad.jpg',
      audioSrc: 'audio/sad.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'angry',
      translation: 'сердитый',
      image: 'img/angry.jpg',
      audioSrc: 'audio/angry.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'happy',
      translation: 'счастливый',
      image: 'img/happy.jpg',
      audioSrc: 'audio/happy.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'tired',
      translation: 'уставший',
      image: 'img/tired.jpg',
      audioSrc: 'audio/tired.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'surprised',
      translation: 'удивлённый',
      image: 'img/surprised.jpg',
      audioSrc: 'audio/surprised.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'scared',
      translation: 'испуганный',
      image: 'img/scared.jpg',
      audioSrc: 'audio/scared.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'smile',
      translation: 'улыбка',
      image: 'img/smile.jpg',
      audioSrc: 'audio/smile.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    },
    {
      word: 'laugh',
      translation: 'смех',
      image: 'img/laugh.jpg',
      audioSrc: 'audio/laugh.mp3',
      trainingClicks: '',
      rightAnswer: '',
      wrongAnswer: ''
    }
]

const categories = cards[0];

let currenCategory = "";

let state = "study";

let switchGame = false;

let rightWords = 0;

let wrongWords = 0;

let indexForGame = 0;

const cardsContainer = document.querySelector(".cards");

const wordContainer = document.querySelector(".words");

const navigation = document.querySelector(".navigation");

const containerForAnswers = document.querySelector(".answers");

const burgerButton = document.querySelector("#menuToggle");

const stat = document.querySelector(".stat");

const sortContainer = document.querySelector(".sort__container");


const setStatistics = () =>{
  if(localStorage.getItem("statistic")){
    statistics = JSON.parse(localStorage.getItem("statistic"));
  };
};

setStatistics();

const showMenu = () =>{
  navigation.classList.toggle("show-navigation");
};

let wordsForGame = [];

const startGame = (e) =>{
  const repeatButton = document.querySelector(".start-button");
  if(e.target.classList.contains("repeat-button")){
    playWordForGame(indexForGame);
  }else{
    repeatButton.classList.add("repeat-button");
    repeatButton.innerHTML = "Repeat";
    indexForGame = 0;
    cards[currenCategory].forEach((audio, index) => {
      wordsForGame.splice(index, 1, audio.audioSrc);
    });
    wordsForGame.sort(function(){
      return Math.random() - 0.5;
    });
    switchGame = true;
    rightWords = 0;
    wrongWords = 0;
    // console.log(e.target)
    setTimeout(playWordForGame, 1000, 0);
  }
};

const playWordForGame = (index) =>{
  let wordAudioForGame = new Audio (wordsForGame[index]);
  wordAudioForGame.play();
};

const createWords = (index, cards, state) => {
  cardsContainer.innerHTML = "";
  wordContainer.innerHTML = "";
  currenCategory = index;
  let words = cards[index];
  const elem = document.createDocumentFragment();
  if(state === "study"){
    words.forEach(word => {
      const wordItem = document.createElement("div");
      wordItem.classList.add("word__item");
      wordItem.setAttribute("data-audio", word.audioSrc);
      wordItem.innerHTML = `<img src="${word.image}" class="word__item__img">
                            <div class="word__item__title">
                              <h3 class="english-word">${word.word}</h3>
                              <h3 class="russian-word">${word.translation}</h3>
                              <a href="#" data-audio = "${word.audioSrc}" class="translate-button">Translate</a>
                            </div>`
      elem.append(wordItem);
    });
  }else{
    words.forEach(word => {
      const wordItem = document.createElement("div");
      wordItem.classList.add("word__item");
      wordItem.setAttribute("data-audio", word.audioSrc);
      wordItem.innerHTML = `<img src="${word.image}" class="word__item__img">`;
      elem.append(wordItem);
    });
    const wordsButtons = document.createElement("div");
    wordsButtons.classList.add("words__buttons");
    const startButton = document.createElement("button");
    startButton.classList.add("start-button");
    startButton.innerText = "Start game";
    wordsButtons.append(startButton);
    wordContainer.append(wordsButtons);
    startButton.addEventListener("click", startGame);
  };
  wordContainer.append(elem);
  console.log(currenCategory);
};


const createCatecories = (state) => {
  cardsContainer.innerHTML = "";
  wordContainer.innerHTML = "";
  currenCategory = 0;
  const fragment = document.createDocumentFragment();
  if(state === "study"){
    categories.forEach((item, index) => {
      const cardItem = document.createElement("div");
      cardItem.classList.add("cards__item");
      cardItem.setAttribute("data-index", index + 1);
      cardItem.innerHTML = `<img src="${cards[index + 1][index + 1].image}" class="cards__item__img">
                            <div class="cards__item__title">
                                <h3>${item}</h3>
                            </div>`
      fragment.append(cardItem);
    });
  }else{
    categories.forEach((item, index) => {
      const cardItem = document.createElement("div");
      cardItem.classList.add("cards__item");
      cardItem.setAttribute("data-index", index + 1);
      cardItem.innerHTML = `<img src="${cards[index + 1][index + 1].image}" class="cards__item__img">
                            <div class="cards__item__title categories-game-mode">
                                <h3>${item}</h3>
                            </div>`
      fragment.append(cardItem);
    });
  }
  
  cardsContainer.append(fragment);
};

createCatecories(state);

navigation.addEventListener("click", (e) => {
  const navigationLink = e.target.closest(".navigation__link");
  const navigationLinks = document.querySelectorAll(".navigation__link");
  if(navigationLink){
    const index = navigationLink.dataset.index;
    currenCategory = index;
    navigationLinks.forEach(link => {link.classList.remove("active")});
    navigationLink.classList.add("active");
    // index == "0" ? createCatecories(state) : createWords(index, cards, state);
    index == "9" ? renderStat(statistics) : createWords(index, cards, state);
  }
})

burgerButton.addEventListener("click", showMenu);

cardsContainer.addEventListener("click", (e) => {
  const currentCard = e.target.closest(".cards__item");
  if(currentCard){
    let index = currentCard.dataset.index;
    createWords(index, cards, state);
  }; 
});

const translateWord = (currentWordCard, currentWordImg, englishWord, russianWord, currentTranslateButton) =>{
    currentWordCard.classList.add("roate-translate");
    currentWordImg.classList.add("roate-picture");
    englishWord.classList.add("hiden");
    russianWord.classList.add("show");
    currentTranslateButton.classList.add("hiden");
};

const removeRussianWord = (currentWordCard, currentWordImg, englishWord, russianWord, currentTranslateButton) =>{
  currentWordCard.classList.remove("roate-translate");
  currentWordImg.classList.remove("roate-picture");
  englishWord.classList.remove("hiden");
  russianWord.classList.remove("show");
  currentTranslateButton.classList.remove("hiden");
};

const playAudio = (wordAudioSrc) => {
  let wordAudio = new Audio (wordAudioSrc);
  wordAudio.play();
}

wordContainer.addEventListener("click", (e) => {
  e.preventDefault();
  const currentWordCard = e.target.closest(".word__item");
  const currentTranslateButton = e.target.closest(".translate-button");
  if(currentTranslateButton){
    const currentWordImg = currentWordCard.querySelector(".word__item__img");
    const englishWord = currentWordCard.querySelector(".english-word");
    const russianWord = currentWordCard.querySelector(".russian-word");
    translateWord(currentWordCard, currentWordImg, englishWord, russianWord, currentTranslateButton);
  };

  if(currentWordCard && !currentTranslateButton && state == "study"){
    let wordAudioSrc = currentWordCard.dataset.audio;
    const englishWord = currentWordCard.querySelector(".english-word");
    playAudio(wordAudioSrc);
    createStat(currentWordCard, englishWord, statistics, "trainingClicks");//stat
  }

  if(switchGame && currentWordCard && state == "game" && switchGame && !currentWordCard.classList.contains("active-word")){
    let wordAudioSrc = currentWordCard.dataset.audio;
    playGame(wordAudioSrc, currentWordCard, statistics);
  }

  setLocalStorage(statistics);
});

const createStat = (currentWordCard, englishWord, statistics) =>{
  let word = statistics.find(obj => obj.word === englishWord.innerText);
  word.trainingClicks++;
};

const playGame = (wordAudioSrc, currentWordCard, statistics) =>{
  let correctAudio = new Audio ("audio/correct.mp3");
  let wrongAudio = new Audio ("audio/error.mp3");
  const rightAnswerLogo = "<img src = 'img/done.png' class = 'answer-logo'>";
  const wrongAnswerLogo = "<img src = 'img/fail.png' class = 'answer-logo'>";
  let currentAudio = wordsForGame[indexForGame];
  let word = statistics.find(obj => obj.audioSrc === currentAudio);//stat
  if(wordAudioSrc == currentAudio){
    correctAudio.play();
    currentWordCard.classList.add("active-word");
    containerForAnswers.innerHTML += rightAnswerLogo;
    word.rightAnswer++;
    rightWords++;
    indexForGame++;
    setTimeout(playWordForGame, 1000, indexForGame);
  }else{
    wrongAudio.play();
    containerForAnswers.innerHTML += wrongAnswerLogo;
    word.wrongAnswer++;
    wrongWords++;
  };
  if(indexForGame == 8){
    indexForGame = 0;
    setTimeout(finishGame, 1000, rightWords, wrongWords);
  };
};

const finishGame = (rightWords, wrongWords) => {
  const winAudio = new Audio ("audio/success.mp3");
  const loseAudio = new Audio ("audio/failure.mp3");
  containerForAnswers.innerHTML = "";
  if(wrongWords>0){
    wrongWords > 1 ? wordContainer.innerHTML = `<p class = "errors-text">You have ${wrongWords} errors</p> <img src='img/failure.jpg'>`:
    wordContainer.innerHTML = `<p class = "errors-text">You have ${wrongWords} error</p> <img src='img/failure.jpg'>`;                                          
    // wordContainer.innerHTML = "<img src='img/failure.jpg'>";
    loseAudio.play();
    setTimeout(createCatecories, 3000, state);
  }else{
    wordContainer.innerHTML = "<img src='img/good_job_logo.png' class = 'good-job-img'>";
    winAudio.play();
    setTimeout(createCatecories, 3000, state);
  };
};


wordContainer.addEventListener("mouseout", (e) => {
  e.preventDefault();
  const mouseOver = e.target.closest(".words");
  const currentWordCard = e.target.closest(".word__item");
  let relatedTarget = e.relatedTarget;
  if(relatedTarget == mouseOver && currentWordCard.classList.contains("roate-translate")){
    const currentWordImg = currentWordCard.querySelector(".word__item__img");
    const englishWord = currentWordCard.querySelector(".english-word");
    const russianWord = currentWordCard.querySelector(".russian-word");
    const currentTranslateButton = currentWordCard.querySelector(".translate-button");
    removeRussianWord(currentWordCard, currentWordImg, englishWord, russianWord, currentTranslateButton);
  };
});

const gameSwither = document.querySelector(".gameSwitcher");

const switchGameMode = () =>{
  state === "study" ? state = "game" : state = "study";
  indexForGame = 0;
  containerForAnswers.innerHTML = "";
  switchGame = false;
  if(currenCategory == 0){
    createCatecories(state);
  }else{
    createWords(currenCategory, cards, state);
  }
};

gameSwither.addEventListener("click", switchGameMode);

const setLocalStorage = (statistics) =>{
  localStorage.setItem("statistic", JSON.stringify(statistics));
};

const renderStat = (data) =>{
  setStatistics();
  stat.innerHTML = "";
  cardsContainer.innerHTML = "";
  wordContainer.innerHTML = "";
  sortContainer.classList.add("d-flex");
  const sortSelect = document.querySelector("#sort");
  sortSelect.addEventListener("change", () =>{setSort(sortSelect)});
  const statContainer = document.createElement("div");
  statContainer.classList.add("stat__container");
  stat.append(statContainer);
  const fragment = document.createDocumentFragment();
  data.forEach((word, index) => {
    let statOfAnswer = Math.round((word.rightAnswer / (word.wrongAnswer + word.rightAnswer)) * 100);
    // statOfAnswer == Infinity ? statOfAnswer = "100%" : statOfAnswer = Math.round((word.rightAnswer / word.wrongAnswer) * 100);
    const statWord = document.createElement("div");
    statWord.classList.add("stat__word");
    statWord.innerHTML = `<div class="stat__word__container-word">
                            <span>${word.word}</span>
                            <span>${word.translation}</span>
                            <span>(Click for more...)</span>
                          </div>
                          <div class="stat__word__container-stat">
                            <span>Clicks during training:<span class="stat__number">${word.trainingClicks}</span></span>
                            <span>Right answers:<span class="stat__number">${word.rightAnswer}</span></span>
                            <span>Wrong answers:<span class="stat__number">${word.wrongAnswer}</span></span>
                            <span>Statistics of answers:<span class="stat__number">${statOfAnswer}%</span></span>
                          </div>`;
    fragment.append(statWord);
  });
  statContainer.append(fragment);
};

const setSort = (sortSelect) =>{
  if(sortSelect.value == "az"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.word < b.word) {
        return -1;
      }
      if (a.word > b.word) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "za"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.word > b.word) {
        return -1;
      }
      if (a.word < b.word) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "training-az"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.trainingClicks > b.trainingClicks) {
        return -1;
      }
      if (a.trainingClicks < b.trainingClicks) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "training-za"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.trainingClicks < b.trainingClicks) {
        return -1;
      }
      if (a.trainingClicks > b.trainingClicks) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "right-az"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.rightAnswer > b.rightAnswer) {
        return -1;
      }
      if (a.rightAnswer < b.rightAnswer) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "right-za"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.rightAnswer < b.rightAnswer) {
        return -1;
      }
      if (a.rightAnswer > b.rightAnswer) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "wrong-az"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.wrongAnswer > b.wrongAnswer) {
        return -1;
      }
      if (a.wrongAnswer < b.wrongAnswer) {
        return 1;
      }
      return 0;
    });
    renderStat(sortStatistics);
  };

  if(sortSelect.value == "wrong-za"){
    let sortStatistics = statistics.sort(function compare(a, b) {
      if (a.wrongAnswer < b.wrongAnswer) {
        return -1;
      }
      if (a.wrongAnswer > b.wrongAnswer) {
        return 1;
      }
      return 0;
    });
  renderStat(sortStatistics);
};
};
